import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import javax.swing.*;
import java.util.Random;
//Importing the necessary Packages

public class ButtonMethods extends JFrame {
	
	Show click = new Show();
	Travel fini = new Travel();
	JButton[][] buttons = new JButton[8][8];
    Icon human = new ImageIcon("C:/Users/maxan/Desktop/Eclipse Workspace/Human.jpg");
    Icon dontmove = new ImageIcon("C:/Users/maxan/Desktop/Eclipse Workspace/dontmove.png");
	//Initializing the Objects that will be needed throughout the whole code (ActionsListener, Buttons and Images)
	
	public static void main(String[] args) throws IOException {
		new ButtonMethods();
	}

	public ButtonMethods () throws IOException {
		for(int i=0;i<8;i++) {
			for(int j=0;j<8;j++) {
				buttons[i][j] = Initialize.retbutton(i,j);
				buttons[i][j].addActionListener(click);
				buttons[i][j].setVisible(false);
			}
		}
		//Buttons will be returned from the main class and will be equipped with action listener as well as made invisible
	    
		int humancount=0;
		Random rand = new Random();
		do {
			int x = rand.nextInt(2) + 6;
			int y = rand.nextInt(8);
			buttons[x][y].setVisible(true);
			buttons[x][y].setIcon(human);
			humancount++;
		}while(humancount <3);
		//Initializing 3 randomly chosen Buttons
	}
	
	private class Show implements ActionListener {
		int x,y;
		public void actionPerformed(ActionEvent e)
		{
			for(int i=0;i<8;i++) {
				for(int j=0;j<8;j++) {
					if(e.getSource() == buttons[i][j])
					{
						x = i;
						y = j;
					//Going trough all Buttons and figuring out which buttons was pressed
					}
				}
			}
			
			for(int a = x-2;a<=x+2;a++) {
				if(a>7 || a<0) {}
					else
					{
						for(int b = y-2;b<=y+2;b++) {
						if(b>7 || b<0) {}
						else {
							if(buttons[a][b].getIcon() == human){
								buttons[a][b].setIcon(dontmove);
								buttons[a][b].removeActionListener(click);
							}
							else
							{
								buttons[a][b].setVisible(true);
								buttons[a][b].setText("Here?");
								buttons[a][b].removeActionListener(click);
								buttons[a][b].addActionListener(fini);
								//Making Buttons in a radius of 2 visible to move the human
							}
						}
						}
					}
			}
			buttons[x][y].setVisible(false);
			buttons[x][y].setIcon(null);
			//The button that was pressed gets invisible(So the player can't move the player to the positio it is already on
		}
	}
	
	private class Travel implements ActionListener
	{
		public void actionPerformed(ActionEvent e)
		{
			for(int i =0;i<8;i++) {
				for(int j=0;j<8;j++) {
					buttons[i][j].addActionListener(click);
					if(e.getSource() == buttons[i][j]) {
						buttons[i][j].setVisible(true);
						buttons[i][j].removeActionListener(fini);
						buttons[i][j].addActionListener(click);
						buttons[i][j].setIcon(human);
						//Removing the Action Listener from all the buttons in the radius of 2 and adding a new one to replace the selected buttonicon with the human -> Completed movement
					}
					else {
						if(buttons[i][j].getIcon() == human || buttons[i][j].getIcon() == dontmove)
						{
							buttons[i][j].setVisible(true);
							buttons[i][j].setIcon(human);
						}
						else
						{
						buttons[i][j].setVisible(false);
						//Setting the rest of the buttons invisible
						}
					}
				}
			}
		}
	}
}